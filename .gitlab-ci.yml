include:
  - project: 'famedly/company/devops/templates/ci-cd'
    ref: rust-v1
    file:
      - '/rust.yml'
  - project: 'famedly/company/devops/templates/ci-cd'
    ref: docker-v1
    file:
      - '/docker.yml'

stages:
  - test
  - build
  - doc
  - deploy

cargo-check:
  extends: .cargo_check
  # Optional, remove if not needed
  script:
    - bash tests/setup.sh
    - !reference [.cargo_check, script]

cargo-build:
  extends: .cargo_build
  # Optional, remove if not needed
  script:
    - !reference [.cargo_build, script]
    - mv config.sample.yaml ./target/release/config.yaml

pages:
  extends: .cargo_doc

docker-releases:
  extends: .docker_releases

docker-tags:
  extends: .docker_tags

docker-branches:
  extends: .docker_branches
